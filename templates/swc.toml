[[template]]
name = "swc"
definition = """({ name, targets, deps, env, options: { configFile = null, swcRc, sourceMaps = true, config = {}, autoInstall } }) => [{
  name,
  targets,
  deps: [...deps, 'node_modules/@swc/core', 'node_modules/@swc/cli'],
  env,
  run: `swc $DEP -o $TARGET${
      !swcRc ? ' --no-swcrc' : ''
    }${
      configFile ? ` --config-file=${configFile}` : ''
    }${
      sourceMaps ? ' --source-maps' : ''
    }${
      Object.keys(config).length ? ' ' + Object.keys(config).map(key => `-C ${key}=${config[key]}`).join(' ') : ''
    }`
}, {
  template: 'npm',
  options: {
    autoInstall,
    packages: ['@swc/core@1', '@swc/cli@0.1'],
    dev: true
  }
}]
"""
